<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Esnad | Home</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="/img/idk.jfif">
    <meta name="description" content="Esnad lets you explore and read your favorite books online for free. Enjoy Fiction, History, Technology and more!">
    <meta name="keywords" content="books online, free PDF books, fiction books, technology books, read online, Esnad, library, ebooks, online library, download books, best books, digital books, education books, Arabic books, English books, children's books, science books, literature, novels, storytelling, self-help books, reference books, history books, textbooks, classic books, mystery books, romance books, fantasy books, adventure books, learning, free ebooks, pdf download">
    <meta name="author" content="Adam Abed">
    <meta property="og:title" content="Esnad - Read Books Online for Free">
    <meta property="og:description" content="Explore your favorite books and PDFs online. Join Esnad today!">
    <!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2526175659497003" crossorigin="anonymous"></script>
    <meta name="google-adsense-account" content="ca-pub-2526175659497003">
    <meta name="google-site-verification" content="VIq-ChoUhw8vP5JtlBc_h2kZYgvqxGs8-h-qHrNDyg0" /> -->
    <link rel="stylesheet" href="/css/index.css">
    <meta name="referrer" content="no-referrer-when-downgrade" />

    <style>
        :root {
          --primary-red: #902f36;
          --primary-red-hover: #6b2329;
          --secondary-red: #a03440;
          --light-red: #fef2f2;
          --accent-gold: #f59e0b;
          --text-primary: #1f2937;
          --text-secondary: #4b5563;
          --text-muted: #6b7280;
          --background-primary: #ffffff;
          --background-secondary: #f9fafb;
          --background-tertiary: #f3f4f6;
          --background-dark: #111827;
          --border-light: #e5e7eb;
          --border-medium: #d1d5db;
          --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
          --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
          --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
          --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
          --radius-sm: 6px;
          --radius-md: 12px;
          --radius-lg: 16px;
          --gradient-primary: linear-gradient(135deg, var(--primary-red) 0%, var(--secondary-red) 100%);
          --gradient-accent: linear-gradient(135deg, var(--accent-gold) 0%, #fbbf24 100%);
        }

        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        body {
          font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
          background: var(--background-secondary);
          color: var(--text-primary);
          line-height: 1.6;
          overflow-x: hidden;
        }

        /* Subtle Background Pattern */
        body::before {
          content: '';
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: 
            radial-gradient(circle at 20% 80%, rgba(144, 47, 54, 0.03) 0%, transparent 50%),
            radial-gradient(circle at 80% 20%, rgba(245, 158, 11, 0.03) 0%, transparent 50%);
          z-index: -1;
        }

        /* Header */
        .header {
          background: rgba(255, 255, 255, 0.95);
          backdrop-filter: blur(10px);
          border-bottom: 1px solid var(--border-light);
          box-shadow: var(--shadow-sm);
          position: sticky;
          top: 0;
          z-index: 1000;
          transition: all 0.3s ease;
        }

        .header.scrolled {
          background: rgba(255, 255, 255, 0.98);
          box-shadow: var(--shadow-md);
        }

        .header-container {
          max-width: 1400px;
          margin: 0 auto;
          padding: 0 1.5rem;
          display: flex;
          justify-content: space-between;
          align-items: center;
          height: 70px;
        }

        .logo-section {
          display: flex;
          align-items: center;
          gap: 0.75rem;
          z-index: 10;
        }

        .logo {
          position: relative;
          transition: transform 0.2s ease;
        }

        .logo img {
          width: 45px;
          height: 45px;
          border-radius: 50%;
          box-shadow: var(--shadow-sm);
          transition: all 0.2s ease;
        }

        .logo:hover {
          transform: scale(1.05);
        }

        .brand-text {
          display: flex;
          flex-direction: column;
        }

        .brand-name {
          font-size: 22px;
          font-weight: 700;
          color: var(--primary-red);
          line-height: 1.2;
          letter-spacing: -0.3px;
        }

        .brand-subtitle {
          font-size: 12px;
          color: var(--text-muted);
          font-weight: 500;
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        /* Desktop Navigation */
        .header-nav {
          display: flex;
          align-items: center;
          gap: 2rem;
        }

        .nav-item {
          color: var(--text-secondary);
          text-decoration: none;
          font-weight: 500;
          font-size: 14px;
          transition: all 0.2s ease;
          padding: 0.5rem 1rem;
          border-radius: var(--radius-sm);
          position: relative;
        }

        .nav-item:hover {
          color: var(--primary-red);
          background: var(--light-red);
        }

        .user-profile {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.5rem 1rem;
          background: var(--background-tertiary);
          border-radius: var(--radius-sm);
          transition: all 0.2s ease;
          cursor: pointer;
        }

        .user-profile:hover {
          background: var(--light-red);
          color: var(--primary-red);
        }

        .user-profile a {
          color: inherit;
          text-decoration: none;
          font-weight: 500;
          font-size: 14px;
        }

        /* Mobile Menu Button */
        .mobile-menu-btn {
          display: none;
          flex-direction: column;
          cursor: pointer;
          padding: 0.5rem;
          gap: 4px;
          transition: all 0.3s ease;
          background: none;
          border: none;
          z-index: 1001;
        }

        .mobile-menu-btn span {
          width: 25px;
          height: 3px;
          background: var(--primary-red);
          border-radius: 3px;
          transition: all 0.3s ease;
        }

        .mobile-menu-btn.active span:nth-child(1) {
          transform: rotate(45deg) translate(6px, 6px);
        }

        .mobile-menu-btn.active span:nth-child(2) {
          opacity: 0;
        }

        .mobile-menu-btn.active span:nth-child(3) {
          transform: rotate(-45deg) translate(6px, -6px);
        }

        /* Mobile Navigation */
        .mobile-nav {
          display: none;
          position: fixed;
          top: 70px;
          left: 0;
          right: 0;
          background: rgba(255, 255, 255, 0.98);
          backdrop-filter: blur(10px);
          border-bottom: 1px solid var(--border-light);
          box-shadow: var(--shadow-lg);
          z-index: 999;
          max-height: 0;
          overflow: hidden;
          transition: max-height 0.3s ease;
        }

        .mobile-nav.active {
          max-height: 400px;
        }

        .mobile-nav-items {
          padding: 1rem 1.5rem;
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .mobile-nav-item {
          color: var(--text-secondary);
          text-decoration: none;
          font-weight: 500;
          font-size: 16px;
          padding: 0.75rem 1rem;
          border-radius: var(--radius-sm);
          transition: all 0.2s ease;
        }

        .mobile-nav-item:hover {
          color: var(--primary-red);
          background: var(--light-red);
        }

        .mobile-user-profile {
          margin-top: 1rem;
          padding: 1rem;
          background: var(--background-tertiary);
          border-radius: var(--radius-sm);
          text-align: center;
        }

        .mobile-user-profile a {
          color: var(--text-primary);
          text-decoration: none;
          font-weight: 500;
        }

        /* Books Grid */
        .books-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
          gap: 1.5rem;
          padding: 2rem;
        }

        .book-card {
          background: var(--background-primary);
          border-radius: var(--radius-md);
          overflow: hidden;
          transition: all 0.2s ease;
          cursor: pointer;
          box-shadow: var(--shadow-sm);
          border: 1px solid var(--border-light);
        }

        .book-card:hover {
          transform: translateY(-2px);
          box-shadow: var(--shadow-md);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
          .header-nav {
            display: none;
          }
          
          .mobile-menu-btn {
            display: flex;
          }
          
          .mobile-nav {
            display: block;
          }
          
          .books-grid {
            grid-template-columns: 1fr;
            gap: 1rem;
            padding: 1.5rem 1rem;
          }
          .user-profile{
            display: none;
          }
        }

        @media (max-width: 480px) {
          .user-profile span {
            display: none;
          }
          
          .brand-name {
            font-size: 18px;
          }
          
          .brand-subtitle {
            font-size: 10px;
          }
          
          .books-grid {
            grid-template-columns: 1fr;
            gap: 0.75rem;
            padding: 1rem;
          }
        }
        .books-toggle {
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin: 1rem 0 2rem;
}

.toggle-btn {
  padding: 0.6rem 1.2rem;
  background: var(--background-tertiary);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-sm);
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s ease, color 0.2s ease;
}

.toggle-btn:hover {
  background: var(--light-red);
  color: var(--primary-red);
}

.toggle-btn.active {
  background: var(--primary-red);
  color: #fff;
  border-color: var(--primary-red);
}

.load-more-btn {
  display: block;
  margin: 2rem auto;
  padding: 0.8rem 1.5rem;
  background: var(--primary-red);
  color: white;
  border: none;
  border-radius: var(--radius-sm);
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s ease;
}
.load-more-btn:hover {
  background: var(--primary-red-hover);
}


        /* Rest of your existing styles would go here... */
        /* I'm including the essential responsive styles above */
    </style>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-FH1GSEHCJG"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-FH1GSEHCJG');
</script>

</head>
<body>
    <header class="header">
        <div class="header-container">
            <div class="logo-section">
                <div class="logo"><img style="border-radius: 50%;" width="60px" src="/img/idk.jfif"></div>
                <div class="brand-text">
                    <div class="brand-name">Esnad</div>
                    <div class="brand-subtitle">No Risk No Story!</div>
                </div>
            </div>
            <nav class="header-nav">
                <a style="color: #902f36 !important;" href="/index" class="nav-item">Home</a>
                <a href="/profile" class="nav-item">Profile</a>
                <a href="#footer" class="nav-item">Contact</a>
                <a href="/pricing" class="nav-item">Pricing</a>
                <a href="/login" class="nav-item">Login</a>
            </nav>
            
            <!-- Hamburger Menu Button -->
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <span></span>
                <span></span>
                <span></span>
            </button>
            
            <div class="user-profile">
                <a href="/profile" style="text-decoration: none; color: inherit;"><%= userName %></a>
            </div>
        </div>
        
        <!-- Mobile Navigation -->
        <nav class="mobile-nav" id="mobileNav">
            <div class="mobile-nav-items">
                <a href="/index" class="mobile-nav-item">Home</a>
                <a href="/profile" class="mobile-nav-item">Profile</a>
                <a href="#" class="mobile-nav-item">Contact</a>
                <a href="/logout" class="mobile-nav-item">Logout</a>
                <a href="/login" class="mobile-nav-item">Login</a>
                <div class="mobile-user-profile">
                    <a href="/profile"><%= userName %></a>
                </div>
            </div>
        </nav>
    </header>

    <main class="main-container">
        <section class="search-hero">
            <h1 class="search-title">Digital Knowledge Hub</h1>
            <p class="search-subtitle">Discover, explore, and immerse yourself in our vast collection of digital books and resources</p>
            <!--multitag-->
            <script> 
              (function(gow){
              var d = document,
                  s = d.createElement('script'),
                  l = d.scripts[d.scripts.length - 1];
              s.settings = gow || {};
              s.src = "\/\/sneakyeffort.com\/bkXdVGs.dwGwln0vYRWocP\/fe\/mR9PuKZAU\/lfktPSTxYi1JO-D\/E\/2\/M\/j\/EItZNZjUU\/4\/MOTyYOycM_gI";
              s.async = true;
              s.referrerPolicy = 'no-referrer-when-downgrade';
              l.parentNode.insertBefore(s, l);
              })({})
              </script>
            <div class="search-container">
                <div class="search-box">
                    <input type="text" id="searchInput" class="search-input" placeholder="Search by title, author, or keyword..." />
                    <div class="search-filters">
                        <select id="categorySelect">
                            <option value="all">All Categories</option>
                            <option value="fiction">Fiction</option>
                            <option value="science fiction">Science Fiction</option>
                            <option value="mystery">Mystery</option>
                            <option value="romance">Romance</option>
                            <option value="fantasy">Fantasy</option>
                            <option value="history">History</option>
                            <option value="biography">Biography</option>
                            <option value="self help">Self Help</option>
                            <option value="technology">Technology</option>
                            <option value="travel">Travel</option>
                            <option value="health">Health</option>
                            <option value="business">Business</option>
                            <option value="magic">Magic</option>
                            <option value="drama">Drama</option>
                            <option value="comics">Comics</option>
                            <option value="esnad">By Esnad</option>
                        </select>
                        
                      
                    </div>
                    
                    <button class="search-button" id="searchButton">
                        <i class="fas fa-search"></i>
                        Search
                    </button>
                </div>
            </div>
        </section>

        <section class="content-section">
            <div class="section-header">
                <h2 class="section-title">Featured Collection</h2>
                <p class="section-subtitle">Curated selection of premium digital resources and bestselling titles</p>
            </div>

            <div class="books-toggle">
              <button id="showDownloaded" class="toggle-btn active">
                <i class="fas fa-download"></i> Books By Users
              </button>
              <button id="showFree" class="toggle-btn">
                <i class="fas fa-book-open"></i> Free Books
              </button>
            </div>
                       

            <div class="books-grid" id="booksGrid">
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <p>Loading your digital library...</p>
                </div>
            </div>

            <div class="library-info">
                <div class="library-motto">
                    Knowledge is the treasure of a wise man - Preserving wisdom for future generations
                </div>
            </div>
        </section>
    </main>

    <!-- Add Your Own Book Button for Free Users -->
<section class="add-book-section">
  <div class="add-book-container">
      <h3>Want to Add Your Own Book?</h3>
      <p>Upgrade to Pro to upload and share your books with the Esnad community.</p>
      <a href="/pricing" class="add-book-button">
          <i class="fas fa-upload"></i> Upgrade to Pro
      </a>
  </div>
</section>


    <footer id="footer">
        <div class="content">
          <div class="top">
            <div class="logo-details">
              <span class="logo_name">Esnad</span>
            </div>
            <div class="media-icons">
              <a href="#"><i class="fab fa-facebook-f"></i></a>
              <a href="https://x.com/EsnadLib">X</a>
              <a href="#"><i class="fab fa-instagram"></i></a>
              <a href="https://www.youtube.com/@esnadlib"><i class="fab fa-youtube"></i></a>
            </div>
          </div>
          <div class="link-boxes">
            <ul class="box">
                <img id="imggg" style="border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.3);" width="200px" src="/img/idk.jfif" alt="">
            </ul>
            <ul class="box">
              <li class="link_name">Navigation</li>
              <li><a href="/index">Home</a></li>
              <li><a href="#footer">Contact</a></li>
              <li><a href="/profile">Profile</a></li>
              <li><a href="/logout">Logout</a></li>
            </ul>
            <ul class="box">
              <li class="link_name">Get in Touch</li>
              <li><a href="https://wa.link/e3ezdq">WhatsApp</a></li>
              <li><a href="#">esnadlib@gmail.com</a></li>
              <li><a href="#">Instagram</a></li>
              <li><a href="#">Facebook</a></li>
            </ul>
          </div>
        </div>
        <div class="bottom-details">
          <div class="bottom_text">
            <span class="copyright_text">Copyright © 2025 <a href="#">Esnad.</a> All rights reserved</span>
            <span class="policy_terms">
              <a href="https://otieu.com/4/9693357">Privacy Policy</a>
              <a href="https://otieu.com/4/9693357">Terms & Conditions</a>
            </span>
          </div>
        </div>
    </footer>

    <script>
      // -----------------------------
      // STATE
      // -----------------------------
      let booksData = [];
      let filteredBooks = [];
      let currentMode = "downloaded"; // "downloaded" or "free"
    
      // Google Books pagination
      let freeBooksStartIndex = 0;
      const freeBooksMaxResults = 40;
      let freeBooksTotal = 0;
      let currentGoogleQuery = "";
    
      // -----------------------------
      // FETCH DOWNLOADED BOOKS
      // -----------------------------
      async function fetchDownloadedBooks() {
        try {
          const res = await fetch('/api/books');
          if (!res.ok) throw new Error('Database fetch failed');
          booksData = await res.json();
          filteredBooks = booksData;
          renderBooks();
          hideLoadMore();
        } catch(err) {
          console.error('Error fetching downloaded books:', err);
          showError("Unable to load downloaded books.");
        }
      }
    
      // -----------------------------
      // FETCH FREE BOOKS (GOOGLE)
      // -----------------------------
      async function fetchFreeBooks(loadMore = false, categoryFilter = "all") {
        try {
          if (!loadMore) {
            freeBooksStartIndex = 0;
            booksData = [];
          }
          const query = currentGoogleQuery || "books";
          let url = `https://www.googleapis.com/books/v1/volumes?q=${encodeURIComponent(query)}&startIndex=${freeBooksStartIndex}&maxResults=${freeBooksMaxResults}`;
    
          const res = await fetch(url);
          if (!res.ok) throw new Error("Google API fetch failed");
          const data = await res.json();
    
          freeBooksTotal = data.totalItems || 0;
          let newBooks = (data.items || []).map(item => ({
            title: item.volumeInfo.title,
            author: item.volumeInfo.authors ? item.volumeInfo.authors.join(", ") : "Unknown",
            category: item.volumeInfo.categories ? item.volumeInfo.categories[0] : "General",
            image: item.volumeInfo.imageLinks ? item.volumeInfo.imageLinks.thumbnail : null,
            _id: item.id,
            googleLink: `https://books.google.com/books?id=${item.id}`
          }));
    
          // Apply category filter
          if (categoryFilter !== "all") {
            newBooks = newBooks.filter(book => book.category.toLowerCase() === categoryFilter);
          }
    
          booksData = booksData.concat(newBooks);
          filteredBooks = booksData;
          renderBooks();
    
          freeBooksStartIndex += freeBooksMaxResults;
          showLoadMore(freeBooksStartIndex < freeBooksTotal);
        } catch (err) {
          console.error("Error fetching free books:", err);
          showError("Unable to load free books.");
        }
      }
    
      // -----------------------------
      // RENDER BOOKS GRID
      // -----------------------------
      function renderBooks() {
        const grid = document.getElementById('booksGrid');
        if (!filteredBooks.length) {
          grid.innerHTML = `
            <div class="no-results fade-in">
              <div class="no-results-icon">📚</div>
              <div class="no-results-title">No books found</div>
              <p>Try adjusting your search criteria or browse all categories</p>
            </div>
          `;
          return;
        }
    
        grid.innerHTML = '';
        filteredBooks.forEach((book, i) => {
          const card = document.createElement('div');
          card.className = 'book-card fade-in';
          card.style.animationDelay = `${i * 0.05}s`;
    
          const bookLink = currentMode === "downloaded"
            ? `/book/${book._id}`
            : book.googleLink;
    
          card.innerHTML = `
            <div class="book-cover">
              ${book.image 
                ? `<img src="${book.image}" alt="${book.title}" class="book-image">`
                : `<div class="book-placeholder"><i class="fas fa-book"></i><span>${book.title.substring(0,30)}${book.title.length>30?'...':''}</span></div>`}
            </div>
            <div class="book-info">
              <h3 class="book-title">${book.title}</h3>
              <div class="book-author">${book.author || 'Unknown Author'}</div>
              <div class="book-meta"><span class="book-category">${book.category || ''}</span></div>
              <a href="${bookLink}" class="read-button" target="_blank">
                <i class="fas fa-book-open"></i> Read Book
              </a>
            </div>
          `;
          grid.appendChild(card);
        });
      }
    
      // -----------------------------
      // SEARCH
      // -----------------------------
      function performSearch() {
        const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
        const selectedCategory = document.getElementById('categorySelect').value.toLowerCase();
    
        if (currentMode === "downloaded") {
          filteredBooks = booksData.filter(book => {
            const matchesSearch =
              !searchTerm ||
              (book.title && book.title.toLowerCase().includes(searchTerm)) ||
              (book.author && book.author.toLowerCase().includes(searchTerm));
            const matchesCategory =
              selectedCategory === "all" ||
              (book.category && book.category.toLowerCase() === selectedCategory);
            return matchesSearch && matchesCategory;
          });
          renderBooks();
        } else if (currentMode === "free") {
          currentGoogleQuery = searchTerm || "books";
          freeBooksStartIndex = 0;
          booksData = [];
          fetchFreeBooks(false, selectedCategory);
        }
      }
    
      function setupSearch(){
        const input = document.getElementById('searchInput');
        const btn = document.getElementById('searchButton');
        const cat = document.getElementById('categorySelect');
        let timeout;
    
        input.addEventListener('input', () => {
          clearTimeout(timeout);
          timeout = setTimeout(performSearch, 300);
        });
        btn.addEventListener('click', performSearch);
        cat.addEventListener('change', performSearch);
        input.addEventListener('keypress', e => {
          if(e.key === "Enter") performSearch();
        });
      }
    
      // -----------------------------
      // TOGGLE BUTTONS
      // -----------------------------
      function setupToggle(){
        const btnDownloaded = document.getElementById("showDownloaded");
        const btnFree = document.getElementById("showFree");
    
        btnDownloaded.addEventListener("click", ()=>{
          btnDownloaded.classList.add("active");
          btnFree.classList.remove("active");
          currentMode = "downloaded";
          fetchDownloadedBooks();
        });
    
        btnFree.addEventListener("click", ()=>{
          btnFree.classList.add("active");
          btnDownloaded.classList.remove("active");
          currentMode = "free";
          freeBooksStartIndex = 0;
          fetchFreeBooks();
        });
      }
    
      // -----------------------------
      // LOAD MORE BUTTON
      // -----------------------------
      function showLoadMore(show){
        let btn = document.getElementById("loadMoreBtn");
        if(!btn){
          btn = document.createElement("button");
          btn.id = "loadMoreBtn";
          btn.className = "load-more-btn";
          btn.innerText = "Load More Free Books";
          btn.addEventListener("click", ()=>fetchFreeBooks(true));
          document.getElementById("booksGrid").after(btn);
        }
        btn.style.display = show ? "block" : "none";
      }
    
      function hideLoadMore(){
        const btn = document.getElementById("loadMoreBtn");
        if(btn) btn.style.display = "none";
      }
    
      // -----------------------------
      // MOBILE MENU
      // -----------------------------
      function setupMobileMenu(){
        const btn = document.getElementById('mobileMenuBtn');
        const nav = document.getElementById('mobileNav');
        btn.addEventListener('click', ()=>{
          btn.classList.toggle('active');
          nav.classList.toggle('active');
        });
        document.addEventListener('click', e=>{
          if(!btn.contains(e.target) && !nav.contains(e.target)){
            btn.classList.remove('active');
            nav.classList.remove('active');
          }
        });
        document.querySelectorAll('.mobile-nav-item').forEach(i=>{
          i.addEventListener('click', ()=>{
            btn.classList.remove('active');
            nav.classList.remove('active');
          });
        });
      }
    
      // -----------------------------
      // INIT
      // -----------------------------
      document.addEventListener('DOMContentLoaded', ()=>{
        setupMobileMenu();
        setupSearch();
        setupToggle();
        fetchDownloadedBooks(); // default start
      });
    
      // -----------------------------
      // ERROR DISPLAY
      // -----------------------------
      function showError(msg){
        const grid = document.getElementById('booksGrid');
        grid.innerHTML = `<div class="no-results fade-in"><div class="no-results-icon">⚠️</div><div class="no-results-title">Error</div><p>${msg}</p></div>`;
      }
    </script>
    
    
        
      
    <script src="https://fpyf8.com/88/tag.min.js" data-zone="162288" async data-cfasync="false"></script>
    
</body> 
</html>
